(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2],{8255:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return pe}});var r=t(2791),s=t(586),o=t(1694),i=t.n(o),a=t(7689),l=t(9434),c=t(43),u=t(4664),d=t(706),f=t(9439),p=t(5820),m=t(3388),x=t(1990),h=t(9389),j=t(7828),g=t(3621),v=t(2622),Z=t(1752),y=t(2056),w=t(732),b=t(1977),k=t(1708),N=t(4165),C=t(5861),S=t(9286),I=t(6776),P=t(7846),F=t(7027),D=t(5518),E=t(5169),L=t(8300),T=t(3352),A=function(e){return(0,T.j0)("sources/deleteFile",e)},R=t(184),O=function(){var e=P.Z.useForm(),n=(0,f.Z)(e,1)[0],t=(0,r.useState)([]),s=(0,f.Z)(t,2),o=s[0],i=s[1],a=(0,r.useState)(!1),u=(0,f.Z)(a,2),d=u[0],p=u[1],m=(0,l.I0)(),j=(0,l.v9)((function(e){return e.source.uploading}));(0,l.v9)((function(e){return e.source.uploadingError}));return(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsxs)("button",{className:"bg-transparent text-white border border-white border-dashed hover:border-indigo-500 font-bold uppercase text-sm rounded shadow hover:shadow-lg outline-none focus:outline-none m-2 ease-linear transition-all duration-150 px-12 py-3 cursor-pointer flex items-center",type:"button",onClick:function(){return p(!0)},children:[!j&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(S.Z,{className:"text-white mr-1"})," Add Property"]}),j&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.Z,{size:"small",className:"mr-1"})," Processing..."]})]}),(0,R.jsx)(x.Z,{open:d,title:"Add a property",okText:"Submit",cancelText:"Cancel",onCancel:function(){return p(!1)},onOk:function(){n.validateFields().then(function(){var e=(0,C.Z)((0,N.Z)().mark((function e(t){var r,s;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.propertyName,0!=(s=t.dragger.fileList.filter((function(e){return"done"==e.status})).map((function(e){return{path:e.path,filename:e.response.filename}}))).length){e.next=4;break}return e.abrupt("return",F.ZP.error("No files uploaded."));case 4:m((0,b.j1)({sourceName:r,fileList:s})),n.resetFields(),i([]),p(!1);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},okButtonProps:{loading:j},children:(0,R.jsxs)(P.Z,{form:n,layout:"vertical",children:[(0,R.jsx)(P.Z.Item,{name:"propertyName",label:"Property Name",rules:[{required:!0,message:"Please input the name of property"}],children:(0,R.jsx)(h.Z,{})}),(0,R.jsx)(P.Z.Item,{name:"dragger",label:"dragger",noStyle:!0,children:(0,R.jsxs)(D.Z.Dragger,{name:"file",action:"".concat(E.Z.HOST_URL,"sources/uploadFile"),accept:"application/pdf",headers:{Authorization:(0,L.cF)("token")},fileList:o,multiple:!0,maxCount:5,onChange:function(e){var n,t=e.fileList,r=e.file;"done"==r.status&&(r.path=null===(n=r.response)||void 0===n?void 0:n.path);var s=t.filter((function(e){return"application/pdf"===e.type}));i(s)},onRemove:function(e){e.path&&A({path:e.path})},children:[(0,R.jsx)("p",{className:"ant-upload-drag-icon",children:(0,R.jsx)(I.Z,{})}),(0,R.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})]})})]})},V=t(1413),_=t(1583),z=t(4215),q=t(9660),H=t(8185),U=t(3661),B=t(2774),G=t(7620),K=function(e){var n=e.open,t=e.onClose,s=P.Z.useForm(),o=(0,f.Z)(s,1)[0],i=(0,r.useState)([]),a=(0,f.Z)(i,2),c=a[0],u=a[1],d=(0,l.I0)(),p=(0,l.v9)((function(e){return e.document.loading})),m=(0,l.v9)((function(e){return e.app.selectedSource}));(0,l.v9)((function(e){return e.source.uploadingError}));return(0,R.jsx)(x.Z,{open:n,title:"Add a Documents",okText:"Submit",cancelText:"Cancel",onCancel:function(){return t()},onOk:function(){o.validateFields().then(function(){var e=(0,C.Z)((0,N.Z)().mark((function e(n){var r;return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(r=n.dragger.fileList.filter((function(e){return"done"==e.status})).map((function(e){return{path:e.path,filename:e.response.filename}}))).length){e.next=3;break}return e.abrupt("return",F.ZP.error("No files uploaded."));case 3:d((0,B.iG)({fileList:r,sourceId:m})),o.resetFields(),u([]),t();case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},okButtonProps:{loading:!!p},children:(0,R.jsx)(P.Z,{form:o,layout:"vertical",children:(0,R.jsx)(P.Z.Item,{name:"dragger",label:"dragger",noStyle:!0,children:(0,R.jsxs)(D.Z.Dragger,{name:"file",action:"".concat(E.Z.HOST_URL,"sources/uploadFile"),accept:"application/pdf",headers:{Authorization:(0,L.cF)("token")},fileList:c,multiple:!0,maxCount:5,onChange:function(e){var n,t=e.fileList,r=e.file;"done"==r.status&&(r.path=null===(n=r.response)||void 0===n?void 0:n.path);var s=t.filter((function(e){return"application/pdf"===e.type}));u(s)},onRemove:function(e){e.path&&A({path:e.path})},children:[(0,R.jsx)("p",{className:"ant-upload-drag-icon",children:(0,R.jsx)(I.Z,{})}),(0,R.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})})})},W=function(){(0,r.useEffect)((function(){U.GlobalWorkerOptions.workerSrc="pdf.worker.js"}));var e=(0,r.useState)({}),n=(0,f.Z)(e,2),t=n[0],s=n[1],o=(0,r.useState)(!1),i=(0,f.Z)(o,2),a=(i[0],i[1],(0,l.v9)((function(e){return e.source.loading}))),u=((0,l.v9)((function(e){return e.source.error})),(0,l.v9)((function(e){return e.source.sources}))),d=(0,l.v9)((function(e){return e.document.documents})),j=(0,l.v9)((function(e){return e.document.loading})),g=(0,l.I0)(),y=(0,l.v9)((function(e){return e.app.selectedSource})),w=(0,r.useState)(!1),k=(0,f.Z)(w,2),I=k[0],D=k[1],E=(0,r.useState)(!1),T=(0,f.Z)(E,2),A=T[0],O=T[1],W=P.Z.useForm(),M=(0,f.Z)(W,1)[0],Y=(0,r.useState)(null),J=(0,f.Z)(Y,2),Q=(J[0],J[1],(0,r.useState)(1)),X=(0,f.Z)(Q,2),$=(X[0],X[1],[{key:"1",label:(0,R.jsxs)(p.Z,{title:"Delete the document!",description:"Are you sure to delete this document?",onConfirm:function(e){console.log(e),g((0,B.iH)(t._id))},onCancel:function(e){console.log(e)},okText:"Yes",cancelText:"No",children:[(0,R.jsx)(v.Z,{})," Delete "]})},{key:"2",label:(0,R.jsxs)("span",{onClick:function(){return O(!0)},children:[(0,R.jsx)(Z.Z,{})," Rename"]})},{key:"3",label:(0,R.jsxs)("span",{onClick:function(){window.open(t.path.replace("public/",""))},children:[(0,R.jsx)(z.Z,{})," View"]})}]),ee=u.map((function(e,n){var t=e.name,r=e.sourceId,o=d.filter((function(e){return e.sourceId===r})).map((function(e){return(0,L.rV)((0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"max-w-[135px] text-ellipsis overflow-hidden",title:e.name,children:e.name})," ",(0,R.jsx)(_.Z,{onOpenChange:function(n){n&&s(e)},trigger:"click",menu:{items:$},placement:"bottomLeft",arrow:{pointAtCenter:!0},children:(0,R.jsx)("div",{children:(0,R.jsx)(H.FQA,{})})})]}),"".concat(e._id),(0,R.jsx)(q.Z,{}),null,!0)}));return o.push((0,L.rV)(j==r?"Processing...":"Add Document","addDocument-".concat(n,"-").concat(r),j==r?(0,R.jsx)(c.Z,{size:"small"}):(0,R.jsx)(S.Z,{}),null)),o.length>0?(0,L.rV)(t,"".concat(r),(0,R.jsx)(H.fmc,{}),o):(0,L.rV)(t,"".concat(r),(0,R.jsx)(H.fmc,{}))}));if((0,r.useEffect)((function(){g((0,b.e6)()),g((0,B.qi)())}),[]),(0,r.useEffect)((function(){var e,n=(0,L.cF)("latestKey")||(null===(e=u[0])||void 0===e?void 0:e.sourceId);n&&g((0,G.P)({sourceId:n}))}),[u]),a)return(0,R.jsx)("div",{className:"text-center text-gray-400",children:"Loading..."});return(0,R.jsxs)("div",{children:[(0,R.jsx)(m.Z,{openKeys:["".concat(y)],onOpenChange:function(e){if(!(e.length<2)){var n=e[e.length-1];g((0,G.P)({sourceId:n})),(0,L.po)("latestKey",n)}},mode:"inline",theme:"dark",items:ee,selectable:!1,onClick:function(e){if(e.key.startsWith("addDocument")){if(j)return F.ZP.warning("Server is busy now. Please wait a moment...");D(!0)}}}),(0,R.jsx)(K,{open:I,onClose:function(){return D(!1)}}),(0,R.jsx)(x.Z,{open:A,title:"Change Documents",okText:"Submit",cancelText:"Cancel",onCancel:function(){return O(!1)},onOk:function(){M.validateFields().then(function(){var e=(0,C.Z)((0,N.Z)().mark((function e(n){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g((0,B.gU)((0,V.Z)((0,V.Z)({},n),{},{id:t._id}))),M.resetFields(),O(!1);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},children:(0,R.jsx)(P.Z,{form:M,layout:"vertical",children:(0,R.jsx)(P.Z.Item,{name:"documentName",label:"Document Name",initialValue:t.name,rules:[{required:!0,message:"Please input the name of property"}],children:(0,R.jsx)(h.Z,{})})})})]})},M=(s.Z.Sider,function(){return(0,R.jsx)(W,{})}),Y=function(){var e=(0,a.TH)(),n=(0,l.I0)(),t=((0,l.v9)((function(e){return e.source.deleting})),(0,l.v9)((function(e){return e.source.renaming})),(0,l.v9)((function(e){return e.source.reseting})),(0,l.v9)((function(e){return e.app.selectedSource}))),s=(0,r.useState)(!1),o=(0,f.Z)(s,2),i=o[0],c=o[1],u=(0,r.useState)(!1),N=(0,f.Z)(u,2),C=N[0],S=N[1],I=(0,r.useState)(""),P=(0,f.Z)(I,2),F=P[0],D=P[1],E=[{title:"Open Documents",label:(0,R.jsx)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:(0,R.jsx)(g.Z,{className:"!text-[18px]"})}),className:"!inline sm:!hidden",onClick:function(){S(!0)}},{title:"Delete Property",label:(0,R.jsx)(p.Z,{placement:"bottomLeft",description:"Are you sure you want to delete this property?",onConfirm:function(e){e.preventDefault(),n((0,b.JN)({sourceId:t}))},okText:"Yes",okButtonProps:{className:"bg-red-600 hover:!bg-red-500 text-white"},cancelText:"No",icon:!1,children:(0,R.jsxs)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:[(0,R.jsx)(v.Z,{className:"!text-[18px]"})," Delete"]})})},{title:"Rename Property",label:(0,R.jsxs)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:[(0,R.jsx)(Z.Z,{className:"!text-[18px]"})," Rename"]}),onClick:function(){c(!0)}},{title:"Reset chat history",label:(0,R.jsxs)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:[(0,R.jsx)(y.Z,{className:"!text-[18px]"})," Reset chat history"]}),onClick:function(){n((0,d.qP)({sourceId:t}))}}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"z-[9999] w-full sticky flex items-center justify-between flex-wrap p-1 shadow left-0 top-0 bg-white",children:[(0,R.jsx)(m.Z,{mode:"horizontal",className:"w-1/2 border-0",selectable:!1,items:E}),(0,R.jsx)("div",{className:"w-1/2 flex justify-end pr-2",children:"/home"==e.pathname&&(0,R.jsx)(k.Z,{})})]}),(0,R.jsx)(x.Z,{title:"Rename Property",style:{top:"10%"},open:i,onOk:function(){n((0,b.d4)({name:F,sourceId:t})),D(""),c(!1)},onCancel:function(){return c(!1)},okButtonProps:{className:"bg-blue-600"},children:(0,R.jsx)(h.Z,{placeholder:"Input property name...",className:"mt-2",onChange:function(e){D(e.target.value)},value:F})}),(0,R.jsxs)(j.Z,{title:"",width:250,placement:"left",style:{backgroundColor:"#001529",color:"#fff"},bodyStyle:{padding:0},onClose:function(){S(!1)},open:C,closeIcon:(0,R.jsx)(w.Z,{style:{color:"#fff"}}),children:[(0,R.jsx)(O,{}),(0,R.jsx)(M,{})]})]})},J=t(3099),Q=t(7309),X=t(3097),$=function(){var e=(0,l.I0)(),n=(0,l.v9)((function(e){return e.message.waiting})),t=((0,l.v9)((function(e){return e.message.promptError})),(0,l.v9)((function(e){return e.app.selectedSource}))),s=(0,l.v9)((function(e){return e.source.sources.length>0})),o=(0,r.useState)(""),i=(0,f.Z)(o,2),a=i[0],c=i[1],u=(0,r.useRef)(null),p=function(r){if(r.preventDefault(),!n&&a){var s=a.trim();e((0,d.bG)({sourceId:t,text:s,isChatOwner:!0})),c("")}};return(0,r.useEffect)((function(){var e;s&&!n&&(null===(e=u.current)||void 0===e||e.focus())}),[s,n]),(0,R.jsx)("div",{className:"py-3 bg-white w-full px-2 sticky bottom-0 left-0",children:(0,R.jsx)("div",{className:"max-w-3xl pl-2 mx-auto",children:(0,R.jsxs)(J.Z.Compact,{style:{width:"100%"},size:"large",children:[(0,R.jsx)(h.Z,{allowClear:!0,placeholder:n?"Waiting for response...":"Ask any question.",onKeyDown:function(e){"Enter"===e.key&&a?p(e):"Enter"==e.key&&e.preventDefault()},value:a,onChange:function(e){return c(e.target.value)},ref:u,disabled:!s||n}),(0,R.jsx)(Q.ZP,{type:"primary",icon:(0,R.jsx)(X.Z,{}),onClick:p,disabled:!s||n})]})})})},ee=t(3218),ne=function(){return(0,R.jsx)("div",{className:"px-3 py-2 flex flex-row w-full justify-start",children:(0,R.jsx)("div",{className:"px-3 py-2 w-fit lg:max-w-lg flex flex-col  rounded-lg  shadow-slate-200 shadow-sm  text-sm",children:(0,R.jsx)(c.Z,{})})})},te=t(1087),re=t(9214),se=t(3414),oe=t(8029),ie=t(4048),ae=function(e){var n=e.message;return(0,R.jsx)(ie.rf,{words:[n],typeSpeed:20})},le=function(e){var n=e.message,t=e.isLast,r=e.onClick,s=n.text,o=n.isChatOwner,a=n.stream,c=(0,l.v9)((function(e){return e.auth.user})),u=a&&t;return(0,R.jsxs)("div",{className:"px-2 py-2 flex w-full ".concat(o?"justify-end flex-row":"flex-col-reverse justify-start flex-wrap"),children:[(0,R.jsx)("div",{className:"px-3 py-2 w-fit lg:max-w-lg flex flex-col shadow-slate-200 shadow-sm whitespace-pre-wrap text-sm \n                ".concat(o?"order-1  bg-blue-500 text-white cursor-default rounded-bl-lg rounded-tr-lg rounded-tl-lg":"order-2  bg-gray-200  text-gray-800 rounded-br-lg rounded-tr-lg rounded-tl-lg"),children:(0,R.jsx)("div",{className:i()({"cursor-pointer":!o}),onClick:function(){return o?null:r()},children:u?(0,R.jsx)(ae,{className:"whitespace-pre-wrap",message:s}):s})}),!o&&(0,R.jsxs)("div",{className:"mt-2 flex",children:[(0,R.jsx)(te.rU,{to:"#",onClick:function(e){window.location.href="mailto:".concat(c.email,"?subject=","Landlordgenius.AI","&body=").concat(s),e.preventDefault()},children:(0,R.jsx)(Q.ZP,{className:"mr-2",type:"primary",icon:(0,R.jsx)(re.Z,{}),children:"Email"})})," ",(0,R.jsx)(oe.CopyToClipboard,{text:s,onCopy:function(){F.ZP.info("This text is copied!")},children:(0,R.jsx)(Q.ZP,{type:"primary",icon:(0,R.jsx)(se.Z,{}),children:"Copy"})})]})]})},ce=function(e){var n=e.messages,t=(0,r.useRef)(null),s=(0,l.v9)((function(e){return e.message.waiting})),o=(0,l.v9)((function(e){return e.app.selectedSource})),i=(0,l.v9)((function(e){return e.auth.user})),a=(0,r.useState)(!1),c=(0,f.Z)(a,2),u=c[0],d=c[1],p=(0,r.useState)([]),m=(0,f.Z)(p,2),x=m[0],h=m[1];return(0,r.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:"w-full max-w-3xl py-5 sm:py-0 mx-auto",children:[o&&n.map((function(e,t){return(0,R.jsx)(le,{message:e,isLast:n.length===t+1,onClick:function(){return function(e){i.isAdmin&&(h(e.sourceDocuments),d(!0))}(e)}},t)})),s&&(0,R.jsx)(ne,{}),(0,R.jsx)("div",{ref:t}),(0,R.jsx)(j.Z,{title:"Sources Documents",width:350,placement:"right",onClose:function(){d(!1)},open:u,children:(0,R.jsx)(J.Z,{direction:"vertical",children:x.map((function(e,n){return(0,R.jsx)(ee.Z,{title:"Document ".concat(n+1),children:(0,R.jsx)("p",{children:e.pageContent})},n)}))})})]})})},ue=function(){var e=(0,a.TH)(),n=(0,l.I0)(),t=(0,l.v9)((function(e){return e.message.loading})),s=((0,l.v9)((function(e){return e.message.error})),(0,l.v9)((function(e){return e.message.messages}))||[]),o=(0,l.v9)((function(e){return e.app.selectedSource}));return(0,r.useEffect)((function(){o&&n((0,d._U)({sourceId:o}))}),[o]),(0,R.jsx)("div",{className:"max-w-full mx-auto",children:(0,R.jsxs)("div",{className:i()("bg-white",{"h-full":"/home"==e.pathname}),children:[(0,R.jsx)(Y,{}),(0,R.jsxs)("div",{className:i()("flex justify-center overflow-auto h-[calc(100vh_-_117px)]",{"items-center":t||!s.length}),children:[t&&(0,R.jsx)(c.Z,{className:"mt-4",size:"large"}),!t&&s.length>0?(0,R.jsx)(ce,{messages:s}):!t&&(0,R.jsx)(u.Z,{image:u.Z.PRESENTED_IMAGE_SIMPLE})]}),(0,R.jsx)($,{})]})})},de=s.Z.Content,fe=s.Z.Sider;var pe=function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(fe,{theme:"dark",width:250,className:"hidden sm:block z-50",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:[(0,R.jsx)(O,{}),(0,R.jsx)(M,{})]}),(0,R.jsx)(s.Z,{className:"sm:ml-[250px]",children:(0,R.jsx)(de,{children:(0,R.jsx)(ue,{})})})]})}},4663:function(){},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}}]);
//# sourceMappingURL=2.32458352.chunk.js.map