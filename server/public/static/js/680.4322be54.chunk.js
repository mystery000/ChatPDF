"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[680],{8255:function(e,n,t){t.r(n),t.d(n,{default:function(){return xe}});var r=t(2791),s=t(586),o=t(1694),a=t.n(o),i=t(7689),l=t(9434),c=t(43),u=t(4664),d=t(706),f=t(9439),p=t(5820),m=t(3388),x=t(1990),h=t(9389),g=t(7828),j=t(3621),v=t(2622),Z=t(1752),y=t(2056),w=t(732),b=t(1977),N=t(1708),k=t(4165),C=t(5861),S=t(9286),P=t(6776),I=t(7846),F=t(7027),D=t(5518),L=t(5169),T=t(8300),E=t(3352),A=function(e){return(0,E.j0)("sources/deleteFile",e)},R=t(184),O=function(){var e=I.Z.useForm(),n=(0,f.Z)(e,1)[0],t=(0,r.useState)([]),s=(0,f.Z)(t,2),o=s[0],a=s[1],i=(0,r.useState)(!1),u=(0,f.Z)(i,2),d=u[0],p=u[1],m=(0,l.I0)(),g=(0,l.v9)((function(e){return e.source.uploading}));(0,l.v9)((function(e){return e.source.uploadingError}));return(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsxs)("button",{className:"bg-transparent text-white border border-white border-dashed hover:border-indigo-500 font-bold uppercase text-sm rounded shadow hover:shadow-lg outline-none focus:outline-none m-2 ease-linear transition-all duration-150 px-12 py-3 cursor-pointer flex items-center",type:"button",onClick:function(){return p(!0)},children:[!g&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(S.Z,{className:"text-white mr-1"})," Add Property"]}),g&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(c.Z,{size:"small",className:"mr-1"})," Processing..."]})]}),(0,R.jsx)(x.Z,{open:d,title:"Add a property",okText:"Submit",cancelText:"Cancel",onCancel:function(){return p(!1)},onOk:function(){n.validateFields().then(function(){var e=(0,C.Z)((0,k.Z)().mark((function e(t){var r,s;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.propertyName,0!=(s=t.dragger.fileList.filter((function(e){return"done"==e.status})).map((function(e){return{path:e.path,filename:e.response.filename}}))).length){e.next=4;break}return e.abrupt("return",F.ZP.error("No files uploaded."));case 4:m((0,b.j1)({sourceName:r,fileList:s})),n.resetFields(),a([]),p(!1);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},okButtonProps:{loading:g},children:(0,R.jsxs)(I.Z,{form:n,layout:"vertical",children:[(0,R.jsx)(I.Z.Item,{name:"propertyName",label:"Property Name",rules:[{required:!0,message:"Please input the name of property"}],children:(0,R.jsx)(h.Z,{})}),(0,R.jsx)(I.Z.Item,{name:"dragger",label:"dragger",noStyle:!0,children:(0,R.jsxs)(D.Z.Dragger,{name:"file",action:"".concat(L.Z.HOST_URL,"sources/uploadFile"),accept:"application/pdf",headers:{Authorization:(0,T.cF)("token")},fileList:o,multiple:!0,maxCount:5,onChange:function(e){var n,t=e.fileList,r=e.file;"done"==r.status&&(r.path=null===(n=r.response)||void 0===n?void 0:n.path);var s=t.filter((function(e){return"application/pdf"===e.type}));a(s)},onRemove:function(e){e.path&&A({path:e.path})},children:[(0,R.jsx)("p",{className:"ant-upload-drag-icon",children:(0,R.jsx)(P.Z,{})}),(0,R.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})]})})]})},V=t(1413),_=t(1583),z=t(4215),U=t(9660),q=t(8185),H=t(9853),B=t(6185),K=t(6204),G=(t(4839),t(8461),t(4027),t(2774)),M=t(7620),W=function(e){var n=e.open,t=e.onClose,s=I.Z.useForm(),o=(0,f.Z)(s,1)[0],a=(0,r.useState)([]),i=(0,f.Z)(a,2),c=i[0],u=i[1],d=(0,l.I0)(),p=(0,l.v9)((function(e){return e.document.loading})),m=(0,l.v9)((function(e){return e.app.selectedSource}));(0,l.v9)((function(e){return e.source.uploadingError}));return(0,R.jsx)(x.Z,{open:n,title:"Add a Documents",okText:"Submit",cancelText:"Cancel",onCancel:function(){return t()},onOk:function(){o.validateFields().then(function(){var e=(0,C.Z)((0,k.Z)().mark((function e(n){var r;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=(r=n.dragger.fileList.filter((function(e){return"done"==e.status})).map((function(e){return{path:e.path,filename:e.response.filename}}))).length){e.next=3;break}return e.abrupt("return",F.ZP.error("No files uploaded."));case 3:d((0,G.iG)({fileList:r,sourceId:m})),o.resetFields(),u([]),t();case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},okButtonProps:{loading:!!p},children:(0,R.jsx)(I.Z,{form:o,layout:"vertical",children:(0,R.jsx)(I.Z.Item,{name:"dragger",label:"dragger",noStyle:!0,children:(0,R.jsxs)(D.Z.Dragger,{name:"file",action:"".concat(L.Z.HOST_URL,"sources/uploadFile"),accept:"application/pdf",headers:{Authorization:(0,T.cF)("token")},fileList:c,multiple:!0,maxCount:5,onChange:function(e){var n,t=e.fileList,r=e.file;"done"==r.status&&(r.path=null===(n=r.response)||void 0===n?void 0:n.path);var s=t.filter((function(e){return"application/pdf"===e.type}));u(s)},onRemove:function(e){e.path&&A({path:e.path})},children:[(0,R.jsx)("p",{className:"ant-upload-drag-icon",children:(0,R.jsx)(P.Z,{})}),(0,R.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"})]})})})})},Y=function(){var e=(0,r.useState)({}),n=(0,f.Z)(e,2),t=n[0],s=n[1],o=(0,r.useState)(!1),a=(0,f.Z)(o,2),i=a[0],u=a[1],d=(0,l.v9)((function(e){return e.source.loading})),g=((0,l.v9)((function(e){return e.source.error})),(0,l.v9)((function(e){return e.source.sources}))),j=(0,l.v9)((function(e){return e.document.documents})),y=(0,l.v9)((function(e){return e.document.loading})),w=(0,l.I0)(),N=(0,l.v9)((function(e){return e.app.selectedSource})),P=(0,r.useState)(!1),D=(0,f.Z)(P,2),L=D[0],E=D[1],A=(0,r.useState)(!1),O=(0,f.Z)(A,2),Y=O[0],J=O[1],Q=I.Z.useForm(),X=(0,f.Z)(Q,1)[0],$=(0,r.useState)(null),ee=(0,f.Z)($,2),ne=(ee[0],ee[1],(0,r.useState)(1)),te=(0,f.Z)(ne,2),re=(te[0],te[1],(0,B.fullScreenPlugin)()),se=(0,K.pageNavigationPlugin)(),oe=se.CurrentPageLabel,ae=[{key:"1",label:(0,R.jsxs)(p.Z,{title:"Delete the document!",description:"Are you sure to delete this document?",onConfirm:function(e){console.log(e),w((0,G.iH)(t._id))},onCancel:function(e){console.log(e)},okText:"Yes",cancelText:"No",children:[(0,R.jsx)(v.Z,{})," Delete"," "]})},{key:"2",label:(0,R.jsxs)("span",{onClick:function(){return J(!0)},children:[(0,R.jsx)(Z.Z,{})," Rename"]})},{key:"3",label:(0,R.jsxs)("span",{onClick:function(){u(!0)},children:[(0,R.jsx)(z.Z,{})," View"]})}],ie=g.map((function(e,n){var t=e.name,r=e.sourceId,o=j.filter((function(e){return e.sourceId===r})).map((function(e){return(0,T.rV)((0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsx)("span",{className:"max-w-[135px] text-ellipsis overflow-hidden",title:e.name,children:e.name})," ",(0,R.jsx)(_.Z,{onOpenChange:function(n){n&&s(e)},trigger:"click",menu:{items:ae},placement:"bottomLeft",arrow:{pointAtCenter:!0},children:(0,R.jsx)("div",{children:(0,R.jsx)(q.FQA,{})})})]}),"".concat(e._id),(0,R.jsx)(U.Z,{}),null,!0)}));return o.push((0,T.rV)(y==r?"Processing...":"Add Document","addDocument-".concat(n,"-").concat(r),y==r?(0,R.jsx)(c.Z,{size:"small"}):(0,R.jsx)(S.Z,{}),null)),o.length>0?(0,T.rV)(t,"".concat(r),(0,R.jsx)(q.fmc,{}),o):(0,T.rV)(t,"".concat(r),(0,R.jsx)(q.fmc,{}))}));if((0,r.useEffect)((function(){w((0,b.e6)()),w((0,G.qi)())}),[]),(0,r.useEffect)((function(){var e,n=(0,T.cF)("latestKey")||(null===(e=g[0])||void 0===e?void 0:e.sourceId);n&&w((0,M.P)({sourceId:n}))}),[g]),d)return(0,R.jsx)("div",{className:"text-center text-gray-400",children:"Loading..."});return(0,R.jsxs)("div",{children:[(0,R.jsx)(m.Z,{openKeys:["".concat(N)],onOpenChange:function(e){if(!(e.length<2)){var n=e[e.length-1];w((0,M.P)({sourceId:n})),(0,T.po)("latestKey",n)}},mode:"inline",theme:"dark",items:ie,selectable:!1,onClick:function(e){if(e.key.startsWith("addDocument")){if(y)return F.ZP.warning("Server is busy now. Please wait a moment...");E(!0)}}}),(0,R.jsx)(W,{open:L,onClose:function(){return E(!1)}}),(0,R.jsx)(x.Z,{open:Y,title:"Change Documents",okText:"Submit",cancelText:"Cancel",onCancel:function(){return J(!1)},onOk:function(){X.validateFields().then(function(){var e=(0,C.Z)((0,k.Z)().mark((function e(n){return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w((0,G.gU)((0,V.Z)((0,V.Z)({},n),{},{id:t._id}))),X.resetFields(),J(!1);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}))},children:(0,R.jsx)(I.Z,{form:X,layout:"vertical",children:(0,R.jsx)(I.Z.Item,{name:"documentName",label:"Document Name",initialValue:t.name,rules:[{required:!0,message:"Please input the name of property"}],children:(0,R.jsx)(h.Z,{})})})}),(0,R.jsx)(x.Z,{width:650,open:i,title:t.name,onCancel:function(){return u(!1)},footer:[],children:(0,R.jsxs)("div",{style:{border:"1px solid rgba(0, 0, 0, 0.3)",height:"75vh"},children:[t.path&&(0,R.jsx)(H.Viewer,{fileUrl:t.path.replace("public",""),plugins:[re,se]}),(0,R.jsx)("div",{className:"flex justify-center mt-2",children:(0,R.jsx)(oe,{children:function(e){return(0,R.jsx)("span",{children:"".concat(e.currentPage+1," / ").concat(e.numberOfPages)})}})})]})})]})},J=(s.Z.Sider,function(){return(0,R.jsx)(Y,{})}),Q=function(){var e=(0,i.TH)(),n=(0,l.I0)(),t=((0,l.v9)((function(e){return e.source.deleting})),(0,l.v9)((function(e){return e.source.renaming})),(0,l.v9)((function(e){return e.source.reseting})),(0,l.v9)((function(e){return e.app.selectedSource}))),s=(0,r.useState)(!1),o=(0,f.Z)(s,2),a=o[0],c=o[1],u=(0,r.useState)(!1),k=(0,f.Z)(u,2),C=k[0],S=k[1],P=(0,r.useState)(""),I=(0,f.Z)(P,2),F=I[0],D=I[1],L=[{title:"Open Documents",label:(0,R.jsx)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:(0,R.jsx)(j.Z,{className:"!text-[18px]"})}),className:"!inline sm:!hidden",onClick:function(){S(!0)}},{title:"Delete Property",label:(0,R.jsx)(p.Z,{placement:"bottomLeft",description:"Are you sure you want to delete this property?",onConfirm:function(e){e.preventDefault(),n((0,b.JN)({sourceId:t}))},okText:"Yes",okButtonProps:{className:"bg-red-600 hover:!bg-red-500 text-white"},cancelText:"No",icon:!1,children:(0,R.jsxs)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:[(0,R.jsx)(v.Z,{className:"!text-[18px]"})," Delete"]})})},{title:"Rename Property",label:(0,R.jsxs)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:[(0,R.jsx)(Z.Z,{className:"!text-[18px]"})," Rename"]}),onClick:function(){c(!0)}},{title:"Reset chat history",label:(0,R.jsxs)("span",{className:"cursor-pointer inline-block px-1 hover:text-[#40a9ff]",children:[(0,R.jsx)(y.Z,{className:"!text-[18px]"})," Reset chat history"]}),onClick:function(){n((0,d.qP)({sourceId:t}))}}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"z-[9999] w-full sticky flex items-center justify-between flex-wrap p-1 shadow left-0 top-0 bg-white",children:[(0,R.jsx)(m.Z,{mode:"horizontal",className:"w-1/2 border-0",selectable:!1,items:L}),(0,R.jsx)("div",{className:"w-1/2 flex justify-end pr-2",children:"/home"==e.pathname&&(0,R.jsx)(N.Z,{})})]}),(0,R.jsx)(x.Z,{title:"Rename Property",style:{top:"10%"},open:a,onOk:function(){n((0,b.d4)({name:F,sourceId:t})),D(""),c(!1)},onCancel:function(){return c(!1)},okButtonProps:{className:"bg-blue-600"},children:(0,R.jsx)(h.Z,{placeholder:"Input property name...",className:"mt-2",onChange:function(e){D(e.target.value)},value:F})}),(0,R.jsxs)(g.Z,{title:"",width:250,placement:"left",style:{backgroundColor:"#001529",color:"#fff"},bodyStyle:{padding:0},onClose:function(){S(!1)},open:C,closeIcon:(0,R.jsx)(w.Z,{style:{color:"#fff"}}),children:[(0,R.jsx)(O,{}),(0,R.jsx)(J,{})]})]})},X=t(3099),$=t(7309),ee=t(3097),ne=function(){var e=(0,l.I0)(),n=(0,l.v9)((function(e){return e.message.waiting})),t=((0,l.v9)((function(e){return e.message.promptError})),(0,l.v9)((function(e){return e.app.selectedSource}))),s=(0,l.v9)((function(e){return e.source.sources.length>0})),o=(0,r.useState)(""),a=(0,f.Z)(o,2),i=a[0],c=a[1],u=(0,r.useRef)(null),p=function(r){if(r.preventDefault(),!n&&i){var s=i.trim();e((0,d.bG)({sourceId:t,text:s,isChatOwner:!0})),c("")}};return(0,r.useEffect)((function(){var e;s&&!n&&(null===(e=u.current)||void 0===e||e.focus())}),[s,n]),(0,R.jsx)("div",{className:"py-3 bg-white w-full px-2 sticky bottom-0 left-0",children:(0,R.jsx)("div",{className:"max-w-3xl pl-2 mx-auto",children:(0,R.jsxs)(X.Z.Compact,{style:{width:"100%"},size:"large",children:[(0,R.jsx)(h.Z,{allowClear:!0,placeholder:n?"Waiting for response...":"Ask any question.",onKeyDown:function(e){"Enter"===e.key&&i?p(e):"Enter"==e.key&&e.preventDefault()},value:i,onChange:function(e){return c(e.target.value)},ref:u,disabled:!s||n}),(0,R.jsx)($.ZP,{type:"primary",icon:(0,R.jsx)(ee.Z,{}),onClick:p,disabled:!s||n})]})})})},te=t(3218),re=function(){return(0,R.jsx)("div",{className:"px-3 py-2 flex flex-row w-full justify-start",children:(0,R.jsx)("div",{className:"px-3 py-2 w-fit lg:max-w-lg flex flex-col  rounded-lg  shadow-slate-200 shadow-sm  text-sm",children:(0,R.jsx)(c.Z,{})})})},se=t(1087),oe=t(9214),ae=t(3964),ie=t(8029),le=t(4048),ce=function(e){var n=e.message;return(0,R.jsx)(le.rf,{words:[n],typeSpeed:20})},ue=function(e){var n=e.message,t=e.isLast,r=e.onClick,s=n.text,o=n.isChatOwner,i=n.stream,c=(0,l.v9)((function(e){return e.auth.user})),u=i&&t;return(0,R.jsxs)("div",{className:"px-2 py-2 flex w-full ".concat(o?"justify-end flex-row":"flex-col-reverse justify-start flex-wrap"),children:[(0,R.jsx)("div",{className:"px-3 py-2 w-fit lg:max-w-lg flex flex-col shadow-slate-200 shadow-sm whitespace-pre-wrap text-sm \n                ".concat(o?"order-1  bg-blue-500 text-white cursor-default rounded-bl-lg rounded-tr-lg rounded-tl-lg":"order-2  bg-gray-200  text-gray-800 rounded-br-lg rounded-tr-lg rounded-tl-lg"),children:(0,R.jsx)("div",{className:a()({"cursor-pointer":!o}),onClick:function(){return o?null:r()},children:u?(0,R.jsx)(ce,{className:"whitespace-pre-wrap",message:s}):s})}),!o&&(0,R.jsxs)("div",{className:"mt-2 flex",children:[(0,R.jsx)(se.rU,{to:"#",onClick:function(e){window.location.href="mailto:".concat(c.email,"?subject=","Landlordgenius.AI","&body=").concat(s),e.preventDefault()},children:(0,R.jsx)($.ZP,{className:"mr-2",type:"primary",icon:(0,R.jsx)(oe.Z,{}),children:"Email"})})," ",(0,R.jsx)(ie.CopyToClipboard,{text:s,onCopy:function(){F.ZP.info("This text is copied!")},children:(0,R.jsx)($.ZP,{type:"primary",icon:(0,R.jsx)(ae.Z,{}),children:"Copy"})})]})]})},de=function(e){var n=e.messages,t=(0,r.useRef)(null),s=(0,l.v9)((function(e){return e.message.waiting})),o=(0,l.v9)((function(e){return e.app.selectedSource})),a=(0,l.v9)((function(e){return e.auth.user})),i=(0,r.useState)(!1),c=(0,f.Z)(i,2),u=c[0],d=c[1],p=(0,r.useState)([]),m=(0,f.Z)(p,2),x=m[0],h=m[1];return(0,r.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:"w-full max-w-3xl py-5 sm:py-0 mx-auto",children:[o&&n.map((function(e,t){return(0,R.jsx)(ue,{message:e,isLast:n.length===t+1,onClick:function(){return function(e){a.isAdmin&&(h(e.sourceDocuments),d(!0))}(e)}},t)})),s&&(0,R.jsx)(re,{}),(0,R.jsx)("div",{ref:t}),(0,R.jsx)(g.Z,{title:"Sources Documents",width:350,placement:"right",onClose:function(){d(!1)},open:u,children:(0,R.jsx)(X.Z,{direction:"vertical",children:x.map((function(e,n){return(0,R.jsx)(te.Z,{title:"Document ".concat(n+1),children:(0,R.jsx)("p",{children:e.pageContent})},n)}))})})]})})},fe=function(){var e=(0,i.TH)(),n=(0,l.I0)(),t=(0,l.v9)((function(e){return e.message.loading})),s=((0,l.v9)((function(e){return e.message.error})),(0,l.v9)((function(e){return e.message.messages}))||[]),o=(0,l.v9)((function(e){return e.app.selectedSource}));return(0,r.useEffect)((function(){o&&n((0,d._U)({sourceId:o}))}),[o]),(0,R.jsx)("div",{className:"max-w-full mx-auto",children:(0,R.jsxs)("div",{className:a()("bg-white",{"h-full":"/home"==e.pathname}),children:[(0,R.jsx)(Q,{}),(0,R.jsxs)("div",{className:a()("flex justify-center overflow-auto h-[calc(100vh_-_117px)]",{"items-center":t||!s.length}),children:[t&&(0,R.jsx)(c.Z,{className:"mt-4",size:"large"}),!t&&s.length>0?(0,R.jsx)(de,{messages:s}):!t&&(0,R.jsx)(u.Z,{image:u.Z.PRESENTED_IMAGE_SIMPLE})]}),(0,R.jsx)(ne,{})]})})},pe=s.Z.Content,me=s.Z.Sider;var xe=function(){return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(me,{theme:"dark",width:250,className:"hidden sm:block z-50",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:[(0,R.jsx)(O,{}),(0,R.jsx)(J,{})]}),(0,R.jsx)(s.Z,{className:"sm:ml-[250px]",children:(0,R.jsx)(pe,{children:(0,R.jsx)(fe,{})})})]})}}}]);
//# sourceMappingURL=680.4322be54.chunk.js.map